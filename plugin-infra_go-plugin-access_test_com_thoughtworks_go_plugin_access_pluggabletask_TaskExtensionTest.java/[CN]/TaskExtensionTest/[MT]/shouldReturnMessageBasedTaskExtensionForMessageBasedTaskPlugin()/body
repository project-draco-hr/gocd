{
  PluginManager pluginManager=mock(PluginManager.class);
  String messageBasedPluginId="messageBased-task";
  TaskExtension taskExtension=new TaskExtension(pluginManager);
  when(pluginManager.hasReferenceFor(Task.class,messageBasedPluginId)).thenReturn(false);
  when(pluginManager.isPluginOfType(JsonBasedTaskExtension.TASK_EXTENSION,messageBasedPluginId)).thenReturn(true);
  Assert.assertTrue(taskExtension.getExtension(messageBasedPluginId) instanceof JsonBasedTaskExtension);
}
