{
  List<ScmMaterialConfig> scmMaterials=filterScmMaterials();
  List<PluggableSCMMaterialConfig> pluggableSCMMaterials=filterPluggableSCMMaterials();
  if (scmMaterials.size() + pluggableSCMMaterials.size() > 1) {
    List<MaterialConfig> allSCMMaterials=new ArrayList<MaterialConfig>();
    allSCMMaterials.addAll(scmMaterials);
    allSCMMaterials.addAll(pluggableSCMMaterials);
    for (    MaterialConfig material : allSCMMaterials) {
      if (StringUtil.isBlank(material.getFolder())) {
        String fieldName=material instanceof ScmMaterialConfig ? ScmMaterialConfig.FOLDER : PluggableSCMMaterialConfig.FOLDER;
        material.addError(fieldName,"Destination directory is required when specifying multiple scm materials");
      }
 else {
        validateDestinationFolder(allSCMMaterials,material);
      }
    }
  }
}
