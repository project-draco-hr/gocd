{
  if (target.startsWith(GoConstants.OLD_URL_CONTEXT + "/") || target.equals(GoConstants.OLD_URL_CONTEXT)) {
    if (shouldRedirect(request)) {
      response.setHeader("Location",target.replaceFirst(GoConstants.OLD_URL_CONTEXT,GoConstants.GO_URL_CONTEXT));
      response.setStatus(HttpStatus.MOVED_PERMANENTLY_301);
    }
 else {
      response.setStatus(HttpStatus.NOT_FOUND_404);
    }
    response.setHeader("Content-Type","text/plain");
    PrintWriter writer=response.getWriter();
    writer.write(String.format("Url(s) starting in '%s' have been permanently moved to '%s', please use the new path.",GoConstants.OLD_URL_CONTEXT,GoConstants.GO_URL_CONTEXT));
    writer.close();
  }
}
