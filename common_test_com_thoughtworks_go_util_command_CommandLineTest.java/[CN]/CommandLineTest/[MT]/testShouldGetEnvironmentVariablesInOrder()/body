{
  ProcessBuilder builder=new ProcessBuilder();
  EnvironmentVariableContext environmentVariableContext=new EnvironmentVariableContext();
  environmentVariableContext.setProperty("GO_SERVER_URL","abc",false);
  environmentVariableContext.setProperty("GO_PIPELINE_NAME","pipelineName",false);
  environmentVariableContext.setProperty("GO_PIPELINE_LABEL","label",false);
  environmentVariableContext.setProperty("GO_STAGE_NAME","stageName",false);
  environmentVariableContext.setProperty("GO_STAGE_COUNTER","stageCounter",false);
  InMemoryStreamConsumer consumer=new InMemoryStreamConsumer();
  CommandLine.setEnvironmentVariables(builder,environmentVariableContext,consumer);
  String output=consumer.getAllOutput();
  assertThat(output.indexOf("GO_SERVER_URL"),lessThan(output.indexOf("GO_PIPELINE_NAME")));
  assertThat(output.indexOf("GO_PIPELINE_NAME"),lessThan(output.indexOf("GO_PIPELINE_LABEL")));
  assertThat(output.indexOf("GO_PIPELINE_LABEL"),lessThan(output.indexOf("GO_STAGE_NAME")));
  assertThat(output.indexOf("GO_STAGE_NAME"),lessThan(output.indexOf("GO_STAGE_COUNTER")));
}
