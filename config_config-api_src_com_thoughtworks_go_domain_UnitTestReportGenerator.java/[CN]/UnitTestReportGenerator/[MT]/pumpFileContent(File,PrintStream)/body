{
  BOMInputStream input=null;
  try {
    input=new BOMInputStream(new FileInputStream(file));
    String content=FileUtil.readToEnd(input);
    final Document document=XmlUtils.buildXmlDocument(content);
    XmlUtils.writeXml(document.getRootElement(),out);
  }
 catch (  JDOMException e) {
    publisher.consumeLine(MessageFormat.format("The file {0} could not be parsed as XML document: {1}",file.getName(),e.getMessage()));
  }
 finally {
    IOUtils.closeQuietly(input);
  }
}
