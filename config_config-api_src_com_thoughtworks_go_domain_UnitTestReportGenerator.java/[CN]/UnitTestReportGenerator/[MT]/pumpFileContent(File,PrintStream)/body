{
  try {
    String content=FileUtil.readToEnd(new BOMInputStream(new FileInputStream(file)));
    final Document document=XmlUtils.buildXmlDocument(content);
    XmlUtils.writeXml(document.getRootElement(),out);
  }
 catch (  JDOMException e) {
    publisher.consumeLine(MessageFormat.format("The file {0} could not be parsed as XML document: {1}",file.getName(),e.getMessage()));
  }
}
