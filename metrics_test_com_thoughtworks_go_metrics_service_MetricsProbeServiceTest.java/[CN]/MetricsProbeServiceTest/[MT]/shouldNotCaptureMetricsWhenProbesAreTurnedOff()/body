{
  when(systemEnvironment.get(SystemEnvironment.CAPTURE_METRICS)).thenReturn(false);
  metricsProbeService=new MetricsProbeService(systemEnvironment);
  assertThat(metricsProbeService.getProbe(ProbeType.SAVE_CONFIG_XML_THROUGH_API) instanceof DoNothingProbe,is(true));
  assertThat(((java.util.List)ReflectionUtil.getField(Metrics.defaultRegistry(),"listeners")).size(),is(0));
  assertThat(((java.util.concurrent.ConcurrentMap)ReflectionUtil.getField(ReflectionUtil.getField(Metrics.defaultRegistry(),"threadPools"),"threadPools")).size(),is(0));
}
