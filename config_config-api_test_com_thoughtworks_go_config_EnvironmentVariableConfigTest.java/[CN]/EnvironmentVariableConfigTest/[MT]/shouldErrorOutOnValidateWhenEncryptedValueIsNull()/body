{
  String plainText="secure_value";
  String cipherText="cipherText";
  when(goCipher.encrypt(plainText)).thenReturn(cipherText);
  when(goCipher.decrypt(cipherText)).thenThrow(new NullPointerException());
  EnvironmentVariableConfig environmentVariableConfig=new EnvironmentVariableConfig(goCipher,"secure_key",plainText,true);
  environmentVariableConfig.validate(null);
  ConfigErrors error=environmentVariableConfig.errors();
  assertThat(error.isEmpty(),is(false));
  assertThat(error.on(EnvironmentVariableConfig.VALUE),is("Please check the log for error details while validating environment variable 'secure_key'."));
}
