{
  String api="api-uri";
  GoPluginApiRequestProcessor processor=mock(GoPluginApiRequestProcessor.class);
  GoApiRequest goApiRequest=mock(GoApiRequest.class);
  when(goApiRequest.api()).thenReturn(api);
  Throwable cause=new RuntimeException("error");
  when(processor.process(goApiRequest)).thenThrow(cause);
  DefaultGoApplicationAccessor goApplicationAccessor=new DefaultGoApplicationAccessor();
  goApplicationAccessor.registerProcessorFor(api,processor);
  try {
    goApplicationAccessor.submit(goApiRequest);
  }
 catch (  Exception e) {
    assertThat(e.getMessage(),is(String.format("Error while processing request api %s",api)));
    assertThat(e.getCause(),is(cause));
  }
}
