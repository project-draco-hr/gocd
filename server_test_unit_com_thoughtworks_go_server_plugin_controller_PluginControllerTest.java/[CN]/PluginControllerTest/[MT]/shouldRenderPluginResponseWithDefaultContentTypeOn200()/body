{
  DefaultGoPluginApiResponse apiResponse=new DefaultGoPluginApiResponse(200);
  String responseBody="response-body";
  apiResponse.setResponseBody(responseBody);
  when(pluginManager.submitTo(eq("plugin.id"),any(GoPluginApiRequest.class))).thenReturn(apiResponse);
  when(servletRequest.getParameterMap()).thenReturn(new HashMap<String,String[]>());
  ModelAndView modelAndView=pluginController.handlePluginInteractRequest("plugin.id","request.name",servletRequest);
  modelAndView.getView().render(null,servletRequest,servletResponse);
  assertThat(modelAndView.getView().getContentType(),is(PluginController.CONTENT_TYPE_HTML));
  verify(writer).write(responseBody);
}
