{
  SystemEnvironment systemEnvironment=mock(SystemEnvironment.class);
  when(systemEnvironment.getCruiseWar()).thenReturn("webapp");
  when(systemEnvironment.get(SystemEnvironment.ADDONS_PATH)).thenReturn("some-non-existent-directory");
  GoServer goServer=new GoServer(systemEnvironment,new GoCipherSuite(sslSocketFactory),mock(GoWebXmlConfiguration.class));
  WebAppContext webApp=goServer.webApp();
  assertThat(webApp.getInitParameter("rails.root"),is("/WEB-INF/rails.new"));
}
