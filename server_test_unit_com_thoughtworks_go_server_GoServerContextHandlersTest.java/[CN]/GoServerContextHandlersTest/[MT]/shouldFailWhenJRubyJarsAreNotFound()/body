{
  SystemEnvironment systemEnvironment=mock(SystemEnvironment.class);
  when(systemEnvironment.get(SystemEnvironment.ADDONS_PATH)).thenReturn("some-non-existent-directory");
  when(systemEnvironment.get(SystemEnvironment.USE_NEW_RAILS)).thenReturn(true);
  when(systemEnvironment.get(SystemEnvironment.JRUBY_NEW_PATH)).thenReturn("junk-non-existent-path.jar");
  GoServer goServer=new GoServer(systemEnvironment,new GoCipherSuite(sslSocketFactory),mock(GoWebXmlConfiguration.class));
  try {
    goServer.webApp();
    fail("Should have failed since junk-non-existent-path.jar is not found.");
  }
 catch (  Exception e) {
    assertThat(e.getMessage(),CoreMatchers.startsWith("Failed to find extra classpath JAR:"));
    assertThat(e.getMessage(),CoreMatchers.endsWith("junk-non-existent-path.jar"));
  }
}
