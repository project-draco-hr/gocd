{
  PluginManager pluginManager=mock(PluginManager.class);
  ApiBasedTaskExtension extension=new ApiBasedTaskExtension(pluginManager);
  String pluginId="plugin-id";
  when(pluginManager.doOn(eq(Task.class),eq(pluginId),any(ActionWithReturn.class))).thenReturn(ExecutionResult.failure("failed"));
  ExecutionResult executionResult=extension.execute(pluginId,mock(ActionWithReturn.class));
  verify(pluginManager).doOn(eq(Task.class),eq(pluginId),any(ActionWithReturn.class));
  assertThat(executionResult.getMessagesForDisplay(),is("failed"));
  assertFalse(executionResult.isSuccessful());
}
