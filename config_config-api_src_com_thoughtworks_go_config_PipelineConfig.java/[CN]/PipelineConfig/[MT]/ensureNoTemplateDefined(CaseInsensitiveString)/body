{
  if (hasTemplate()) {
    throw new IllegalStateException(String.format("Cannot add stage '%s' to pipeline '%s', which already references template '%s'.",stageName,name,templateName));
  }
}
