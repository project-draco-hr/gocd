{
  ActionWithReturn actionWithReturn=mock(ActionWithReturn.class);
  PluginManager pluginManager=mock(PluginManager.class);
  MessageBasedTaskExtension extension=new MessageBasedTaskExtension(pluginManager);
  String pluginId="plugin-id";
  when(actionWithReturn.execute(any(MessageBasedTask.class),any(GoPluginDescriptor.class))).thenReturn(ExecutionResult.success("yay"));
  ExecutionResult executionResult=extension.execute(pluginId,actionWithReturn);
  verify(actionWithReturn).execute(any(MessageBasedTask.class),any(GoPluginDescriptor.class));
  assertThat(executionResult.getMessagesForDisplay(),is("yay"));
  assertTrue(executionResult.isSuccessful());
}
