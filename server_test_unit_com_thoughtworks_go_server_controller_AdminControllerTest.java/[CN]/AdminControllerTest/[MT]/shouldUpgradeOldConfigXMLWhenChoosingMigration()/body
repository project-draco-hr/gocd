{
  String configFileContent=ConfigFileFixture.VERSION_0;
  GoConfigService.XmlPartialSaver partialSaver=mock(GoConfigService.XmlPartialSaver.class);
  when(localizer.localize("SAVED_CONFIGURATION_SUCCESSFULLY",new Object[]{})).thenReturn("Saved configuration successfully.");
  when(mockGoConfigService.fileSaver(true)).thenReturn(partialSaver);
  GoConfigValidity goConfigValidity=GoConfigValidity.valid(ConfigSaveState.UPDATED);
  when(partialSaver.saveXml(configFileContent,"md5")).thenReturn(goConfigValidity);
  ModelAndView modelAndView=controller.handleEditConfiguration(configFileContent,"md5",true,request);
  verify(partialSaver).saveXml(configFileContent,"md5");
  assertThat((String)modelAndView.getModelMap().get(GoConstants.SUCCESS_MESSAGE),is("Saved configuration successfully."));
}
