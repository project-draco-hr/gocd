{
  when(goConfigService.allGroups()).thenReturn(Arrays.asList("group1","group2"));
  String user="looser";
  when(securityService.hasViewPermissionForGroup(user,"group1")).thenReturn(false);
  when(securityService.hasViewPermissionForGroup(user,"group2")).thenReturn(true);
  PipelineConfigs expectedPipelineConfigs=new PipelineConfigs();
  PipelineConfig pipelineConfig=new PipelineConfig();
  GitMaterialConfig gitMaterialConfig1=new GitMaterialConfig("http://test.com");
  pipelineConfig.addMaterialConfig(gitMaterialConfig1);
  expectedPipelineConfigs.add(pipelineConfig);
  when(goConfigService.getAllPipelinesInGroup("group2")).thenReturn(expectedPipelineConfigs);
  PipelineConfigs gotPipelineConfigs=service.getConfigsForUser(user);
  verify(goConfigService,never()).getAllPipelinesInGroup("group1");
  assertThat(gotPipelineConfigs,is(expectedPipelineConfigs));
}
