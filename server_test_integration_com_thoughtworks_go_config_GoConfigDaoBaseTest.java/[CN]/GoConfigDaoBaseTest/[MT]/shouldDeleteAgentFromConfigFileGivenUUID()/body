{
  AgentConfig agentConfig1=new AgentConfig("uuid1","test1","192.168.0.1");
  AgentConfig agentConfig2=new AgentConfig("uuid2","test2","192.168.0.2");
  AgentInstance fromConfigFile1=AgentInstance.createFromConfig(agentConfig1,new SystemEnvironment());
  AgentInstance fromConfigFile2=AgentInstance.createFromConfig(agentConfig2,new SystemEnvironment());
  goConfigDao.addAgent(agentConfig1);
  goConfigDao.addAgent(agentConfig2);
  CruiseConfig cruiseConfig=goConfigDao.load();
  assertThat(cruiseConfig.agents().size(),is(2));
  goConfigDao.deleteAgents(fromConfigFile1);
  cruiseConfig=goConfigDao.load();
  assertThat(cruiseConfig.agents().size(),is(1));
  assertThat(cruiseConfig.agents().get(0),is(agentConfig2));
}
