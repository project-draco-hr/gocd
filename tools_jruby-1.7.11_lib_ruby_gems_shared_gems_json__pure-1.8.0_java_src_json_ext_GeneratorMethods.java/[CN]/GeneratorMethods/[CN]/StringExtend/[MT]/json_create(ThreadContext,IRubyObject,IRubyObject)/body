{
  Ruby runtime=context.getRuntime();
  RubyHash o=vHash.convertToHash();
  IRubyObject rawData=o.fastARef(runtime.newString("raw"));
  if (rawData == null) {
    throw runtime.newArgumentError("\"raw\" value not defined " + "for encoded String");
  }
  RubyArray ary=Utils.ensureArray(rawData);
  byte[] bytes=new byte[ary.getLength()];
  for (int i=0, t=ary.getLength(); i < t; i++) {
    IRubyObject element=ary.eltInternal(i);
    if (element instanceof RubyFixnum) {
      bytes[i]=(byte)RubyNumeric.fix2long(element);
    }
 else {
      throw runtime.newTypeError(element,runtime.getFixnum());
    }
  }
  return runtime.newString(new ByteList(bytes,false));
}
