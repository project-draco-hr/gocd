{
  when(systemEnvironment.get(SystemEnvironment.GO_SSL_CONFIG_FILE_PATH)).thenReturn(defaultSSLConfig);
  NewImprovedSSLConfig systemConfigured=new NewImprovedSSLConfig(systemEnvironment);
  FileUtils.writeStringToFile(overrideFile,org.apache.commons.io.IOUtils.toString(getClass().getResourceAsStream(partialConfig)));
  when(systemEnvironment.get(SystemEnvironment.USER_CONFIGURED_SSL_CONFIG_FILE_PATH)).thenReturn(overrideFile.getAbsolutePath());
  NewImprovedSSLConfig userOverriddenConfig=new NewImprovedSSLConfig(systemEnvironment);
  assertThat(userOverriddenConfig.isRenegotiationAllowed(),is(systemConfigured.isRenegotiationAllowed()));
}
