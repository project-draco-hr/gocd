{
  Pipeline pipeline=pipelineOne.createdPipelineWithAllStagesPassed();
  String groupName=configHelper.currentConfig().getGroups().findGroupNameByPipeline(new CaseInsensitiveString(pipeline.getName()));
  configHelper.setViewPermissionForGroup(groupName,"admin");
  HttpOperationResult result=new HttpOperationResult();
  PipelineInstanceModels pipelineInstanceModels=pipelineHistoryService.loadMinimalData(pipeline.getName(),Pagination.pageFor(0,1,10),"foo",result);
  assertThat(pipelineInstanceModels,is(nullValue()));
  assertThat(result.httpCode(),is(401));
  result=new HttpOperationResult();
  pipelineInstanceModels=pipelineHistoryService.loadMinimalData(pipeline.getName(),Pagination.pageFor(0,1,10),"admin",result);
  assertThat(pipelineInstanceModels,is(not(nullValue())));
  assertThat(result.canContinue(),is(true));
}
