{
  Resources resources=new Resources("java");
  AgentConfig approvedAgentConfig=new AgentConfig("uuid","test1","192.168.0.1",resources);
  AgentConfig deniedAgentConfig=new AgentConfig("","test2","192.168.0.2",resources);
  deniedAgentConfig.disable();
  goConfigDao.addAgent(approvedAgentConfig);
  goConfigDao.addAgent(deniedAgentConfig);
  CruiseConfig cruiseConfig=goConfigDao.load();
  assertThat(cruiseConfig.agents().size(),is(2));
  assertThat(cruiseConfig.agents().get(0),is(approvedAgentConfig));
  assertThat(cruiseConfig.agents().get(0).getResources(),is(resources));
  assertThat(cruiseConfig.agents().get(1),is(deniedAgentConfig));
  assertThat(cruiseConfig.agents().get(1).isDisabled(),is(Boolean.TRUE));
  assertThat(cruiseConfig.agents().get(1).getResources(),is(resources));
}
