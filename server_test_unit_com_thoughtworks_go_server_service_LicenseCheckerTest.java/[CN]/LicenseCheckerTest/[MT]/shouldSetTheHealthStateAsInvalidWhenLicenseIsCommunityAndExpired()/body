{
  when(goLicenseService.isLicenseValid()).thenReturn(true);
  when(goLicenseService.isLicenseExpired()).thenReturn(true);
  when(goLicenseService.getCruiseEdition()).thenReturn(Edition.Free);
  HttpOperationResult result=new HttpOperationResult();
  licenseChecker.check(result);
  assertThat(result.httpCode(),is(406));
  assertThat(result.getServerHealthState().getType(),is(HealthStateType.invalidLicense(HealthStateScope.GLOBAL)));
  assertThat(result.message(),is("Failed to schedule the pipeline because your license has expired."));
}
