{
  CruiseConfig cruiseConfig=cruiseConfigWithSecurity(new Role(new CaseInsensitiveString("role"),new RoleUser(new CaseInsensitiveString("first")),new RoleUser(new CaseInsensitiveString("second"))),new AdminUser(new CaseInsensitiveString("admin")));
  PipelineConfigs group=cruiseConfig.findGroup("defaultGroup");
  PipelineConfig pipeline=cruiseConfig.find("defaultGroup",0);
  StageConfig stage=pipeline.get(0);
  StageConfigMother.addApprovalWithUsers(stage,"user");
  Approval approval=stage.getApproval();
  approval.validate(ValidationContext.forChain(cruiseConfig,group,pipeline,stage));
  AdminUser user=approval.getAuthConfig().getUsers().get(0);
  assertThat(user.errors().isEmpty(),is(true));
}
