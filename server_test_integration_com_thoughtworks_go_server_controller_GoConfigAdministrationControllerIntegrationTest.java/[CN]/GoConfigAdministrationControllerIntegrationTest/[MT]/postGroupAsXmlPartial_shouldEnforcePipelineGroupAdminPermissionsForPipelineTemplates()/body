{
  String md5=setUpPipelineGroupsWithAdminPermissions();
  ConfigElementImplementationRegistry registry=ConfigElementImplementationRegistryMother.withNoPlugins();
  XmlUtils.validate(new FileInputStream(configHelper.getConfigFile()),GoConfigSchema.getCurrentSchema(),new XsdErrorTranslator(),new SAXBuilder(),registry.xsds());
  controller.postGroupAsXmlPartial(TemplatesConfig.PIPELINE_TEMPLATES_FAKE_GROUP_NAME,NEW_TEMPLATES,md5,response);
  assertThat(response.getStatus(),is(SC_UNAUTHORIZED));
  XmlUtils.validate(new FileInputStream(configHelper.getConfigFile()),GoConfigSchema.getCurrentSchema(),new XsdErrorTranslator(),new SAXBuilder(),registry.xsds());
  setCurrentUser("admin");
  controller.postGroupAsXmlPartial(TemplatesConfig.PIPELINE_TEMPLATES_FAKE_GROUP_NAME,NEW_TEMPLATES,md5,response);
  assertThat(response.getStatus(),is(SC_OK));
}
