{
  ConfigurationPropertyBuilder builder=new ConfigurationPropertyBuilder();
  for (  ConfigurationProperty property : configurations) {
    String configKey=property.getConfigurationKey() != null ? property.getConfigKeyName() : null;
    String encryptedValue=property.getEncryptedValue() != null ? property.getEncryptedValue().getValue() : null;
    String configValue=property.getConfigurationValue() != null ? property.getConfigValue() : null;
    TaskPreference taskPreference=taskPreference();
    if (isValidPluginConfiguration(configKey,taskPreference)) {
      configuration.add(builder.create(configKey,configValue,encryptedValue,pluginConfigurationFor(configKey,taskPreference).getOption(Property.SECURE)));
    }
 else {
      configuration.add(property);
    }
  }
}
