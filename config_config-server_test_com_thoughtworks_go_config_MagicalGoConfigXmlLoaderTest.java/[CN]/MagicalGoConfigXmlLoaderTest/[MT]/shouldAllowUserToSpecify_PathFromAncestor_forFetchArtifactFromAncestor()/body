{
  String content=ConfigFileFixture.configWithPipeline("<pipeline name='uppest_pipeline'>" + "    <materials>" + "      <git url=\"foo\" />"+ "    </materials>"+ "  <stage name='uppest_stage'>"+ "    <jobs>"+ "      <job name='uppest_job'>"+ "      </job>"+ "    </jobs>"+ "  </stage>"+ "</pipeline>"+ "<pipeline name='up_pipeline'>"+ "    <materials>"+ "      <pipeline pipelineName=\"uppest_pipeline\" stageName=\"uppest_stage\"/>"+ "    </materials>"+ "  <stage name='up_stage'>"+ "    <jobs>"+ "      <job name='up_job'>"+ "      </job>"+ "    </jobs>"+ "  </stage>"+ "</pipeline>"+ "<pipeline name='down_pipeline'>"+ "    <materials>"+ "      <pipeline pipelineName=\"up_pipeline\" stageName=\"up_stage\"/>"+ "    </materials>"+ "  <stage name='down_stage'>"+ "    <jobs>"+ "      <job name='down_job'>"+ "      </job>"+ "    </jobs>"+ "  </stage>"+ "</pipeline>"+ "<pipeline name='downest_pipeline'>"+ "    <materials>"+ "      <pipeline pipelineName=\"down_pipeline\" stageName=\"down_stage\"/>"+ "    </materials>"+ "  <stage name='downest_stage'>"+ "    <jobs>"+ "      <job name='downest_job'>"+ "        <tasks>"+ "          <fetchartifact pipeline=\"uppest_pipeline/up_pipeline/down_pipeline\" stage=\"uppest_stage\" job=\"uppest_job\" srcfile=\"src\" dest=\"dest\"/>"+ "        </tasks>"+ "      </job>"+ "    </jobs>"+ "  </stage>"+ "</pipeline>",CONFIG_SCHEMA_VERSION);
  GoConfigHolder holder=ConfigMigrator.loadWithMigration(content);
  assertThat(holder.config.pipelineConfigByName(new CaseInsensitiveString("downest_pipeline")).getFetchTasks().get(0),is(new FetchTask(new CaseInsensitiveString("uppest_pipeline/up_pipeline/down_pipeline"),new CaseInsensitiveString("uppest_stage"),new CaseInsensitiveString("uppest_job"),"src","dest")));
}
