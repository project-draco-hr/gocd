{
  String xml="<cruise schemaVersion='" + CONFIG_SCHEMA_VERSION + "'>\n"+ "<repositories>\n"+ "    <repository id='repo-id' name='repo_name'>\n"+ "		<pluginConfiguration id='plugin-id' version='1.0'/>\n"+ "      <configuration>\n"+ "        <property>\n"+ "          <key>url</key>\n"+ "          <value>http://go</value>\n"+ "        </property>\n"+ "      </configuration>\n"+ "      <packages>\n"+ "        <package id='package-id' name='pkg_name'>\n"+ "          <configuration>\n"+ "            <property>\n"+ "              <key>name</key>\n"+ "              <value>go-agent</value>\n"+ "            </property>\n"+ "          </configuration>\n"+ "        </package>\n"+ "      </packages>\n"+ "    </repository>\n"+ "  </repositories>"+ "<pipelines group=\"group_name\">\n"+ "  <pipeline name=\"new_name\" labeltemplate=\"${COUNT}-${repo_name:pkg_name}\">\n"+ "    <materials>\n"+ "      <package ref='package-id' />\n"+ "    </materials>\n"+ "    <stage name=\"stage_name\">\n"+ "      <jobs>\n"+ "        <job name=\"job_name\" />\n"+ "      </jobs>\n"+ "    </stage>\n"+ "  </pipeline>\n"+ "</pipelines></cruise>";
  GoConfigHolder holder=ConfigMigrator.loadWithMigration(xml);
  assertThat(holder.config.getAllPipelineConfigs().get(0).materialConfigs().get(0).getName().toString(),is("repo_name:pkg_name"));
}
