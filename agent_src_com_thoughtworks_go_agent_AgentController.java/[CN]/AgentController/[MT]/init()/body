{
  websocketService.setController(this);
  createPipelinesFolderIfNotExist();
  sslInfrastructureService.createSslInfrastructure();
  AgentIdentifier identifier=agentIdentifier();
  if (agentAutoRegistrationProperties.isElastic()) {
    agentRuntimeInfo=ElasticAgentRuntimeInfo.fromAgent(identifier,AgentRuntimeStatus.Idle,currentWorkingDirectory(),systemEnvironment.getAgentLauncherVersion(),agentAutoRegistrationProperties.getAgentAutoRegisterElasticAgentId(),agentAutoRegistrationProperties.getAgentAutoRegisterElasticPluginId());
  }
 else {
    agentRuntimeInfo=AgentRuntimeInfo.fromAgent(identifier,AgentStatus.Idle.getRuntimeStatus(),currentWorkingDirectory(),systemEnvironment.getAgentLauncherVersion());
  }
  subprocessLogger.registerAsExitHook("Following processes were alive at shutdown: ");
}
