{
  Map responseMap;
  try {
    responseMap=parseResponseToMap(responseBody);
  }
 catch (  Exception e) {
    throw new RuntimeException("Parse directory result should be returned as map");
  }
  if (responseMap == null || responseMap.isEmpty()) {
    throw new RuntimeException("Empty response body");
  }
  if (responseMap.containsKey("target_version") && responseMap.get("target_version") != null) {
    Object targetVersion=responseMap.get("target_version");
    if (!(targetVersion instanceof Integer)) {
      throw new RuntimeException("Parse directory result 'target_version' should be an integer");
    }
    int version=(int)targetVersion;
    while (version < CURRENT_CONTRACT_VERSION) {
      migrate(responseBody,version);
      version++;
    }
  }
  ParseDirectoryResponseMessage parseDirectoryResponseMessage=codec.getGson().fromJson(responseBody,ParseDirectoryResponseMessage.class);
  ErrorCollection errors=new ErrorCollection();
  parseDirectoryResponseMessage.validateResponse(errors);
  throw new RuntimeException("not implemented");
}
