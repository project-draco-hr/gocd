{
  try {
    GoConfigHolder newConfigHolder;
    if (partials.length == 0) {
      newConfigHolder=fileService.loadConfigHolder();
    }
 else {
      BasicCruiseConfig merge=new BasicCruiseConfig((BasicCruiseConfig)cruiseConfig,partials);
      List<ConfigErrors> allErrors=validate(merge);
      if (!allErrors.isEmpty()) {
        if (!allErrors.isEmpty()) {
          throw new GoConfigInvalidException(merge,allErrors);
        }
        return;
      }
      CruiseConfig forEdit=fileService.loadConfigHolder().configForEdit;
      newConfigHolder=new GoConfigHolder(merge,forEdit);
    }
    this.saveValidConfigToCache(newConfigHolder);
  }
 catch (  Exception e) {
    LOGGER.error(String.format("Failed validation of merged configuration: %s",e));
    saveConfigError(e);
  }
}
