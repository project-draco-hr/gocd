{
  server=mock(Server.class);
  systemEnvironment=mock(SystemEnvironment.class);
  when(systemEnvironment.getServerPort()).thenReturn(1234);
  when(systemEnvironment.keystore()).thenReturn(temporaryFolder.newFolder());
  when(systemEnvironment.truststore()).thenReturn(temporaryFolder.newFolder());
  when(systemEnvironment.getWebappContextPath()).thenReturn("context");
  when(systemEnvironment.getCruiseWar()).thenReturn("cruise.war");
  when(systemEnvironment.getParentLoaderPriority()).thenReturn(true);
  when(systemEnvironment.useCompressedJs()).thenReturn(true);
  when(systemEnvironment.get(SystemEnvironment.RESPONSE_BUFFER_SIZE)).thenReturn(1000);
  when(systemEnvironment.get(SystemEnvironment.IDLE_TIMEOUT)).thenReturn(2000);
  when(systemEnvironment.configDir()).thenReturn(configDir=temporaryFolder.newFile());
  sslSocketFactory=mock(SSLSocketFactory.class);
  when(sslSocketFactory.getSupportedCipherSuites()).thenReturn(new String[]{});
  jetty9Server=new Jetty9Server(systemEnvironment,"pwd",sslSocketFactory,server);
}
