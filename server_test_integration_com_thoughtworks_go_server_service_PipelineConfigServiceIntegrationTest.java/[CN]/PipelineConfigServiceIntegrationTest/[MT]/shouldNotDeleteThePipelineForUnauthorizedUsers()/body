{
  assertThat(goConfigService.getAllPipelineConfigs().size(),is(2));
  assertTrue(goConfigService.hasPipelineNamed(pipelineConfig.name()));
  pipelineConfigService.deletePipelineConfig(new Username(new CaseInsensitiveString("unauthorized-user")),pipelineConfig,result);
  assertFalse(result.isSuccessful());
  assertThat(result.toString(),result.toString().contains("UNAUTHORIZED_TO_DELETE_PIPELINE"),is(true));
  assertThat(result.httpCode(),is(401));
  assertThat(goConfigService.getAllPipelineConfigs().size(),is(2));
  assertTrue(goConfigService.hasPipelineNamed(pipelineConfig.name()));
}
