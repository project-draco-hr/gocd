{
  if (this.queues.containsKey(pluginDescriptor.id())) {
    try {
      GoMessageQueue queue=queues.get(pluginDescriptor.id());
      queue.stop();
      ArrayList<JMSMessageListenerAdapter> listenerAdapters=listeners.get(pluginDescriptor.id());
      for (      JMSMessageListenerAdapter listenerAdapter : listenerAdapters) {
        try {
          listenerAdapter.stop();
        }
 catch (        JMSException e) {
          LOGGER.error("Unable to stop create-agent-listener {}, ERROR: {}",listenerAdapter.thread.getName(),e.getMessage(),e);
          bomb(e);
        }
      }
    }
 catch (    Exception e) {
      LOGGER.error("Unable to stop create-agent-queue {}, ERROR: {}",pluginDescriptor.id(),e.getMessage(),e);
      bomb(e);
    }
 finally {
      this.queues.remove(pluginDescriptor.id());
      this.listeners.remove(pluginDescriptor.id());
    }
  }
}
