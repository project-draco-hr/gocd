{
  for (  Resource resource : plan.getResources()) {
    resource.setBuildId(jobId);
    resourceRepository.saveCopyOf(resource);
  }
  for (  ArtifactPropertiesGenerator generator : plan.getPropertyGenerators()) {
    generator.setJobId(jobId);
    artifactPropertiesGeneratorRepository.save(generator);
  }
  for (  ArtifactPlan artifactPlan : plan.getArtifactPlans()) {
    artifactPlan.setBuildId(jobId);
    artifactPlanRepository.save(artifactPlan);
  }
  environmentVariableDao.save(jobId,EnvironmentVariableSqlMapDao.EnvironmentVariableType.Job,plan.getVariables());
}
