{
  Mockito.when(mockLicenseInterceptor.preHandle(request,response,null)).thenThrow(new RuntimeException("foo"));
  try {
    configValidityFilter.doFilter(request,response,filterChain);
    fail("Should have thrown an exception");
  }
 catch (  ServletException e) {
    assertThat(e.getMessage(),is("Exception while verifying license"));
  }
}
