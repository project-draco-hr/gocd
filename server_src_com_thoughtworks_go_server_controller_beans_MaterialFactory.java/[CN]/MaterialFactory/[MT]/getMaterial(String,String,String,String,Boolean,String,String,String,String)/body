{
  if ("svn".equals(scm) || StringUtils.isBlank(scm)) {
    return new SvnMaterialConfig(paramUrl,paramUsername,paramPassword,false);
  }
  if ("hg".equals(scm)) {
    return new HgMaterialConfig(paramUrl,null);
  }
  if ("git".equals(scm)) {
    return new GitMaterialConfig(paramUrl,branch);
  }
  if ("p4".equals(scm)) {
    if (StringUtils.isBlank(view)) {
      bomb("View is required for perforce");
    }
    P4MaterialConfig p4=new P4MaterialConfig(paramUrl,view,paramUsername);
    p4.setPassword(paramPassword);
    p4.setUseTickets(BooleanUtils.toBoolean(useTickets));
    return p4;
  }
  if ("tfs".equals(scm)) {
    TfsMaterialConfig tfsMaterial=new TfsMaterialConfig(new GoCipher(),new UrlArgument(paramUrl),paramUsername,valueOrEmptyString(domain),paramPassword,projectPath);
    return tfsMaterial;
  }
  throw new RuntimeException("Invalid scm: " + scm);
}
