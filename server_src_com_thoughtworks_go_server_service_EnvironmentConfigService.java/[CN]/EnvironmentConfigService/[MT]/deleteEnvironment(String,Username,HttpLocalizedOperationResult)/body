{
  Localizable noPermission=LocalizedMessage.string("NO_PERMISSION_TO_DELETE_ENVIRONMENT",environmentName,username.getDisplayName());
  Localizable.CurryableLocalizable actionFailed=LocalizedMessage.string("ENV_DELETE_FAILED",environmentName);
  editEnvironments(new EditEnvironments(){
    public void performEdit(){
      try {
        EnvironmentConfig config=getEnvironmentConfig(environmentName);
        goConfigService.updateConfig(new DeleteEnvironmentCommand(config,username));
        result.setMessage(LocalizedMessage.string("ENVIRONMENT_DELETE_SUCCESSFUL",environmentName));
      }
 catch (      NoSuchEnvironmentException e) {
        result.notFound(LocalizedMessage.string("RESOURCE_NOT_FOUND","Environment",environmentName),HealthStateType.general(HealthStateScope.GLOBAL));
      }
    }
  }
,username,result,noPermission,actionFailed);
}
