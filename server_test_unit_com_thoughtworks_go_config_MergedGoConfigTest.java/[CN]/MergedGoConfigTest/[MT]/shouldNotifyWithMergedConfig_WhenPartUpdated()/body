{
  ConfigRepoConfig configRepo=configWatchList.getCurrentConfigRepos().get(0);
  PartialConfig part1=new PartialConfig(new PipelineGroups(PipelineConfigMother.createGroup("part1",PipelineConfigMother.pipelineConfig("pipe1"))));
  when(plugin.Load(any(File.class),any(PartialConfigLoadContext.class))).thenReturn(part1);
  ConfigChangedListener listener=mock(ConfigChangedListener.class);
  mergedGoConfig.registerListener(listener);
  repoConfigDataSource.onCheckoutComplete(configRepo.getMaterialConfig(),folder,"321e");
  assertThat("currentConfigShouldBeMerged",mergedGoConfig.currentConfig().hasPipelineNamed(new CaseInsensitiveString("pipe1")),is(true));
  verify(listener,times(1)).onConfigChange(mergedGoConfig.currentConfig());
}
