{
  JsonBasedTaskExtension extension=new JsonBasedTaskExtension(pluginManager);
  final String anotherPluginId="another-plugin-id";
  assertTrue(extension.getHandler(pluginId) instanceof JsonBasedTaskExtensionHandler_V1);
  when(pluginManager.resolveExtensionVersion(eq(anotherPluginId),any(ArrayList.class))).thenThrow(new RuntimeException("some error"));
  try {
    extension.getHandler(anotherPluginId);
    fail("should have failed");
  }
 catch (  Exception e) {
    assertThat(e.getMessage(),is("some error"));
  }
}
