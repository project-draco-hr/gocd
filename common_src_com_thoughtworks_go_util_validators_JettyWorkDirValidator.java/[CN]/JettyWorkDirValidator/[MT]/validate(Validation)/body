{
  if (SystemEnvironment.getProperty("jetty.home","").equals("")) {
    new SystemEnvironment().setProperty("jetty.home",new SystemEnvironment().getPropertyImpl("user.dir"));
    new SystemEnvironment().setProperty("jetty.base",new SystemEnvironment().getPropertyImpl("user.dir"));
  }
  File home=new File(new SystemEnvironment().getPropertyImpl("jetty.home"));
  File work=new File(new SystemEnvironment().getPropertyImpl("jetty.home"),"work");
  if (home.exists()) {
    if (work.exists()) {
      try {
        FileUtils.deleteDirectory(work);
      }
 catch (      IOException e) {
        String message=format("Error trying to remove Jetty working directory {0}: {1}",work.getAbsolutePath(),e);
        return val.addError(new RuntimeException(message));
      }
    }
    work.mkdir();
  }
  return Validation.SUCCESS;
}
