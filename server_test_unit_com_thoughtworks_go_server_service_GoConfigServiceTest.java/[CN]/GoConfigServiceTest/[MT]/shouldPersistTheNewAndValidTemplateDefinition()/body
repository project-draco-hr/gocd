{
  CruiseConfig config=new BasicCruiseConfig();
  config.server().setArtifactsDir("/var/logs");
  config.addTemplate(new PipelineTemplateConfig(new CaseInsensitiveString("templateName"),StageConfigMother.custom("stage","job")));
  when(goConfigFileDao.loadForEditing()).thenReturn(config);
  String templateContent="<templates>" + "<pipeline name='pipeline'>\n" + "  <stage name='firstStage'>"+ "     <jobs>"+ "         <job name='jobName'/>"+ "      </jobs>"+ "  </stage>"+ "</pipeline>"+ "</templates>";
  GoConfigValidity validity=goConfigService.templatesSaver().saveXml(templateContent,"md5");
  assertThat(validity.errorMessage(),is(""));
}
