{
  AgentRuntimeInfo agentRuntimeInfo=new AgentRuntimeInfo(new AgentIdentifier("remote-host","50.40.30.20","abc"),AgentRuntimeStatus.Idle,currentWorkingDirectory(),"cookie",null);
  AgentInstance pending=AgentInstance.createFromLiveAgent(agentRuntimeInfo,new SystemEnvironment());
  AgentConfig agentConfig=new AgentConfig("UUID2","remote-host","50.40.30.20");
  agentConfig.disable();
  AgentInstance fromConfigFile=AgentInstance.createFromConfig(agentConfig,new SystemEnvironment());
  goConfigService.currentCruiseConfig().agents().add(agentConfig);
  goConfigService.disableAgents(false,pending,fromConfigFile);
  GoConfigDao.CompositeConfigCommand command=new GoConfigDao.CompositeConfigCommand(GoConfigDao.createAddAgentCommand(pending.agentConfig()),GoConfigDao.updateApprovalStatus("UUID2",false));
  verify(goConfigDao).updateConfig(command);
}
