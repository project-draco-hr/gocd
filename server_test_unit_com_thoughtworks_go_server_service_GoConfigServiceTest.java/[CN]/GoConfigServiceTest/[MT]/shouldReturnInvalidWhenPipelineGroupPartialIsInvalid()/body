{
  String groupName="group_name";
  String md5="md5";
  cruiseConfig=new CruiseConfig();
  expectLoad(cruiseConfig);
  new GoConfigMother().addPipelineWithGroup(cruiseConfig,groupName,"pipeline_name","stage_name","job_name");
  expectLoadForEditing(cruiseConfig);
  when(goConfigFileDao.md5OfConfigFile()).thenReturn(md5);
  String pipelineGroupContent=groupXmlWithInvalidElement(groupName);
  GoConfigValidity validity=goConfigService.groupSaver(groupName).saveXml(pipelineGroupContent,"md5");
  assertThat(validity.isValid(),Matchers.is(false));
  assertThat(validity.errorMessage(),containsString("Invalid content was found starting with element 'unknown'"));
  verify(goConfigFileDao,never()).updateConfig(any(UpdateConfigCommand.class));
}
