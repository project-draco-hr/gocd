{
  String originalContents="" + "#\n" + "# file autogenerated by chef, any changes will be lost\n"+ "#\n"+ "# the registration key\n"+ "agent.auto.register.key = some secret key\n"+ "\n"+ "# the resources on this agent\n"+ "agent.auto.register.resources = some,resources\n"+ "\n"+ "# The hostname of this agent\n"+ "agent.auto.register.hostname = agent42.example.com\n"+ "\n"+ "# The environments this agent belongs to\n"+ "agent.auto.register.environments = production,blue\n"+ "\n";
  FileUtils.write(configFile,originalContents);
  AgentAutoRegistrationProperties properties=new AgentAutoRegistrationProperties(configFile);
  properties.scrubRegistrationProperties();
  String newContents="" + "#\n" + "# file autogenerated by chef, any changes will be lost\n"+ "#\n"+ "# the registration key\n"+ "# The autoregister key has been intentionally removed by Go as a security measure.\n"+ "# agent.auto.register.key = some secret key\n"+ "\n"+ "# the resources on this agent\n"+ "# This property has been removed by Go after attempting to auto-register with the Go server.\n"+ "# agent.auto.register.resources = some,resources\n"+ "\n"+ "# The hostname of this agent\n"+ "# This property has been removed by Go after attempting to auto-register with the Go server.\n"+ "# agent.auto.register.hostname = agent42.example.com\n"+ "\n"+ "# The environments this agent belongs to\n"+ "# This property has been removed by Go after attempting to auto-register with the Go server.\n"+ "# agent.auto.register.environments = production,blue\n"+ "\n";
  assertThat(FileUtils.readFileToString(configFile),is(newContents));
}
