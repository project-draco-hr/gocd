{
  ConfigurationPropertyBuilder builder=new ConfigurationPropertyBuilder();
  for (  ConfigurationProperty property : configurations) {
    String configKey=property.getConfigurationKey() != null ? property.getConfigKeyName() : null;
    String encryptedValue=property.getEncryptedValue() != null ? property.getEncryptedValue().getValue() : null;
    String configValue=property.getConfigurationValue() != null ? property.getConfigValue() : null;
    SCMConfigurations scmConfigurations=SCMMetadataStore.getInstance().getConfigurationMetadata(getPluginId());
    if (isValidPluginConfiguration(configKey,scmConfigurations)) {
      configuration.add(builder.create(configKey,configValue,encryptedValue,scmConfigurationFor(configKey,scmConfigurations).getOption(SCMConfiguration.SECURE)));
    }
 else {
      configuration.add(property);
    }
  }
}
