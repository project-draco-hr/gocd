{
  GoConfigDao.CompositeConfigCommand command=new GoConfigDao.CompositeConfigCommand();
  if (!hasAgent(uuid) && enable.isTrue()) {
    AgentInstance agentInstance=agentInstances.findAgent(uuid);
    AgentConfig agentConfig=agentInstance.agentConfig();
    command.addCommand(GoConfigDao.createAddAgentCommand(agentConfig));
  }
  if (enable.isTrue()) {
    command.addCommand(GoConfigDao.updateApprovalStatus(uuid,false));
  }
  if (enable.isFalse()) {
    command.addCommand(GoConfigDao.updateApprovalStatus(uuid,true));
  }
  if (hostname != null) {
    command.addCommand(new GoConfigDao.UpdateAgentHostname(uuid,hostname,userName));
  }
  if (resources != null) {
    command.addCommand(new GoConfigDao.UpdateResourcesCommand(uuid,new Resources(resources)));
  }
  goConfigDao.updateConfig(command);
}
