{
  pipelineFixture.createdPipelineWithAllStagesPassed();
  Document document=ccTrayStatusService.createCctrayXmlDocument("http://localhost:8153");
  List projects=XPath.selectNodes(document,"/Projects/Project");
  assertThat(projects.size(),is(4));
  assertHasProject(document,format("%s :: %s",pipelineFixture.pipelineName,pipelineFixture.devStage));
  assertHasProject(document,format("%s :: %s",pipelineFixture.pipelineName,pipelineFixture.ftStage));
  assertHasProject(document,String.format("%s :: %s :: %s",pipelineFixture.pipelineName,pipelineFixture.ftStage,PipelineWithTwoStages.JOB_FOR_FT_STAGE));
  assertHasProject(document,String.format("%s :: %s :: %s",pipelineFixture.pipelineName,pipelineFixture.devStage,PipelineWithTwoStages.JOB_FOR_DEV_STAGE));
  assertWebUrlContains(document,"http://localhost:8153");
}
