{
  String absolutePath=artifactFile.getAbsolutePath();
  if (!artifactFile.exists()) {
    LOGGER.error("Failed to find file [" + absolutePath + "]");
    return 0;
  }
  LOGGER.info(String.format("Uploading file [%s] to url [%s]",absolutePath,url));
  PostMethod filePost=createPostMethodForUpload(url,size,artifactFile,artifactChecksums);
  try {
    return execute(filePost);
  }
 catch (  IOException e) {
    LOGGER.error("Error while uploading file [" + artifactFile.getAbsolutePath() + "]",e);
    throw e;
  }
 finally {
    filePost.releaseConnection();
  }
}
