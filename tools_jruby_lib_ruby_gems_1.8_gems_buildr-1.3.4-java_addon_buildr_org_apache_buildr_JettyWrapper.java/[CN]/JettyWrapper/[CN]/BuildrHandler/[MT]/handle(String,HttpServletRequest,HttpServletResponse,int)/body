{
  response.setContentType("text/html");
  if (request.getPathInfo().equals("/")) {
    response.getWriter().println("Alive");
    ((Request)request).setHandled(true);
    return;
  }
 else   if (request.getPathInfo().equals("/deploy")) {
    try {
      String webapp=request.getParameter("webapp");
      String path=request.getParameter("path");
      System.out.println("Deploying " + webapp + " in "+ path);
      WebAppContext context;
      context=(WebAppContext)_apps.get(path);
      if (context != null) {
        context.stop();
        _handlerColl.removeHandler(context);
        _apps.remove(path);
      }
      context=new WebAppContext(webapp,path);
      context.setConfigurationClasses(new String[]{"org.mortbay.jetty.webapp.WebInfConfiguration","org.mortbay.jetty.webapp.WebXmlConfiguration"});
      context.setClassLoader(new WebAppClassLoader(context));
      _handlerColl.addHandler(context);
      context.start();
      _apps.put(path,context);
      response.getWriter().println("Deployed");
      response.getWriter().println(context.getTempDirectory());
      ((Request)request).setHandled(true);
    }
 catch (    Throwable e) {
      e.printStackTrace();
      response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
      ((Request)request).setHandled(true);
      return;
    }
  }
 else   if (request.getPathInfo().equals("/undeploy")) {
    try {
      String path=request.getParameter("path");
      WebAppContext context=(WebAppContext)_apps.get(path);
      if (context != null) {
        System.out.println("Undeploying app at " + path);
        context.stop();
        _handlerColl.removeHandler(context);
        _apps.remove(path);
      }
      response.getWriter().println("Undeployed");
      ((Request)request).setHandled(true);
    }
 catch (    Throwable e) {
      e.printStackTrace();
      response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
      ((Request)request).setHandled(true);
      return;
    }
  }
 else   if (request.getPathInfo().equals("/stop")) {
    try {
      _server.stop();
      _server.destroy();
      System.exit(0);
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
  response.getWriter().println("OK " + request.getPathInfo());
  ((Request)request).setHandled(true);
}
