{
  ccTrayStatus.clear();
  transactionTemplate.execute(new TransactionCallbackWithoutResult(){
    public void doInTransactionWithoutResult(    TransactionStatus status){
      stageService.cancelStage(stage);
    }
  }
);
  stage=stageService.stageById(stage.getId());
  StageIdentifier identifier=stage.getIdentifier();
  assertThat(ccTrayStatus.getProject(identifier.ccProjectName()),is(new ProjectStatus(identifier.ccProjectName(),stage.stageState().cctrayActivity(),stage.stageState().cctrayStatus(),identifier.ccTrayLastBuildLabel(),stage.completedDate(),identifier.webUrl())));
}
