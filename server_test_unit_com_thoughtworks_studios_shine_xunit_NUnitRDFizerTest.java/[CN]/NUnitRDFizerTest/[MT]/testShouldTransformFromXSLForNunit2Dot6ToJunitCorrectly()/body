{
  String nunitInputXml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<!--\n" + "This file represents the results of running a test suite\n"+ "-->\n"+ "<test-results name=\"C:\\Program Files\\NUnit 2.6\\bin\\tests\\mock-assembly.dll\" total=\"21\" errors=\"1\" failures=\"1\" not-run=\"7\" inconclusive=\"1\" ignored=\"4\" skipped=\"0\" invalid=\"3\" date=\"2012-02-04\" time=\"11:46:05\">\n"+ "   <environment nunit-version=\"2.6.0.12035\" clr-version=\"2.0.50727.4963\" os-version=\"Microsoft Windows NT 6.1.7600.0\" platform=\"Win32NT\" cwd=\"C:\\Program Files\\NUnit 2.6\\bin\" machine-name=\"CHARLIE-LAPTOP\" user=\"charlie\" user-domain=\"charlie-laptop\" />\n"+ "   <culture-info current-culture=\"en-US\" current-uiculture=\"en-US\" />\n"+ "   <test-suite type=\"Assembly\" name=\"C:\\Program Files\\NUnit 2.6\\bin\\tests\\mock-assembly.dll\" executed=\"True\" result=\"Failure\" success=\"False\" time=\"0.094\" asserts=\"0\">\n"+ "      <results>\n"+ "         <test-suite type=\"Namespace\" name=\"NUnit\" executed=\"True\" result=\"Failure\" success=\"False\" time=\"0.078\" asserts=\"0\">\n"+ "            <results>\n"+ "               <test-suite type=\"Namespace\" name=\"Tests\" executed=\"True\" result=\"Failure\" success=\"False\" time=\"0.078\" asserts=\"0\">\n"+ "                  <results>\n"+ "                     <test-suite type=\"Namespace\" name=\"Assemblies\" executed=\"True\" result=\"Failure\" success=\"False\" time=\"0.031\" asserts=\"0\">\n"+ "                        <results>\n"+ "                           <test-suite type=\"TestFixture\" name=\"MockTestFixture\" description=\"Fake Test Fixture\" executed=\"True\" result=\"Failure\" success=\"False\" time=\"0.031\" asserts=\"0\">\n"+ "                              <categories>\n"+ "                                 <category name=\"FixtureCategory\" />\n"+ "                              </categories>\n"+ "                              <results>\n"+ "                                 <test-case name=\"NUnit.Tests.Assemblies.MockTestFixture.TestWithException\" executed=\"True\" result=\"Error\" success=\"False\" time=\"0.000\" asserts=\"0\">\n"+ "                                    <failure>\n"+ "                                       <message>Intentional Error</message>\n"+ "                                       <stack-trace>Some Stack Trace</stack-trace>\n"+ "                                    </failure>\n"+ "                                 </test-case>\n"+ "                                 <test-case name=\"NUnit.Tests.Assemblies.MockTestFixture.FailingTest\" executed=\"True\" result=\"Failure\" success=\"False\" time=\"0.016\" asserts=\"0\">\n"+ "                                    <failure>\n"+ "                                       <message>Intentional failure</message>\n"+ "                                       <stack-trace>Some Stack Trace</stack-trace>\n"+ "                                    </failure>\n"+ "                                 </test-case>\n"+ "                                 <test-case name=\"NUnit.Tests.Assemblies.MockTestFixture.MockTest3\" executed=\"True\" result=\"Success\" success=\"True\" time=\"0.016\" asserts=\"0\">\n"+ "                                    <categories>\n"+ "                                       <category name=\"AnotherCategory\" />\n"+ "                                       <category name=\"MockCategory\" />\n"+ "                                    </categories>\n"+ "                                    <reason>\n"+ "                                       <message>Success</message>\n"+ "                                    </reason>\n"+ "                                 </test-case>\n"+ "                              </results>\n"+ "                           </test-suite>\n"+ "                        </results>\n"+ "                     </test-suite>\n"+ "                  </results>\n"+ "               </test-suite>\n"+ "            </results>\n"+ "         </test-suite>\n"+ "      </results>\n"+ "   </test-suite>\n"+ "</test-results>";
  String expectedResultantJunitFormat="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<testsuites>" + "<testsuite name=\"NUnit.Tests.Assemblies.MockTestFixture\" tests=\"3\" time=\"0.031\" failures=\"1\" errors=\"1\" skipped=\"0\">"+ "<testcase classname=\"NUnit.Tests.Assemblies.MockTestFixture\" name=\"TestWithException\" time=\"0.000\">"+ "<error message=\"Intentional Error\">Some Stack Trace</error><"+ "/testcase><testcase classname=\"NUnit.Tests.Assemblies.MockTestFixture\" name=\"FailingTest\" time=\"0.016\">"+ "<failure message=\"Intentional failure\">Some Stack Trace</failure>"+ "</testcase><testcase classname=\"NUnit.Tests.Assemblies.MockTestFixture\" name=\"MockTest3\" time=\"0.016\"/>"+ "</testsuite>"+ "</testsuites>";
  try (InputStream xsl=getClass().getClassLoader().getResourceAsStream("xunit/nunit-to-junit.xsl")){
    TransformerFactory transformerFactory=TransformerFactory.newInstance();
    DocumentSource source=new DocumentSource(new SAXReader().read(new InputSource(new ByteArrayInputStream(nunitInputXml.getBytes("utf-8")))));
    DocumentResult result=new DocumentResult();
    Transformer transformer=transformerFactory.newTransformer(new StreamSource(xsl));
    transformer.transform(source,result);
    assertThat(result.getDocument().asXML(),isIdenticalTo(expectedResultantJunitFormat));
  }
 }
