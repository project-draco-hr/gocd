{
  String P1="P1";
  String currentPipeline="P2";
  ValueStreamMap graph=new ValueStreamMap(currentPipeline,null);
  graph.addUpstreamMaterialNode(new SCMDependencyNode("git_fingerprint","git","git"),new CaseInsensitiveString("git1"),new Modifications(ModificationsMother.multipleModificationList()),currentPipeline);
  graph.addUpstreamNode(new PipelineDependencyNode(P1,P1),null,currentPipeline);
  graph.addUpstreamMaterialNode(new SCMDependencyNode("git_fingerprint","git","git"),new CaseInsensitiveString("git2"),new Modifications(ModificationsMother.multipleModificationList()),P1);
  SCMDependencyNode node=(SCMDependencyNode)graph.findNode("git_fingerprint");
  HashSet<String> materialNames=new HashSet<String>();
  materialNames.add("git1");
  materialNames.add("git2");
  assertThat(node.getMaterialNames(),is(materialNames));
}
