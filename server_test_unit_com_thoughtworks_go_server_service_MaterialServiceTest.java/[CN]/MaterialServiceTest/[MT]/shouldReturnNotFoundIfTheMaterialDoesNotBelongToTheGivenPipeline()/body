{
  when(securityService.hasViewPermissionForPipeline(Username.valueOf("pavan"),"pipeline")).thenReturn(true);
  LocalizedOperationResult operationResult=mock(LocalizedOperationResult.class);
  when(goConfigService.materialForPipelineWithFingerprint("pipeline","sha")).thenThrow(new RuntimeException("Not found"));
  materialService.searchRevisions("pipeline","sha","23",new Username(new CaseInsensitiveString("pavan")),operationResult);
  verify(operationResult).notFound(LocalizedMessage.materialWithFingerPrintNotFound("pipeline","sha"),HealthStateType.general(HealthStateScope.forPipeline("pipeline")));
}
