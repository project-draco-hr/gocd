{
  CommandLine gitClone=git(environment).withArg("clone").withArg(String.format("--branch=%s",branch)).withArg("--no-checkout");
  if (depth < Integer.MAX_VALUE) {
    gitClone.withArg(String.format("--depth=%s",depth));
  }
  gitClone.withArg(new UrlArgument(url)).withArg(workingDir.getAbsolutePath());
  return run(gitClone,outputStreamConsumer);
}
