{
  when(pluginManager.submitTo(eq(pluginId),any(GoPluginApiRequest.class))).thenReturn(response);
  when(handler.toExecutionResult(response)).thenReturn(ExecutionResult.failure("error1"));
  ExecutionResult result=new JsonBasedTaskExecutor(pluginId,pluginManager,handler).execute(config(),context);
  assertThat(result.isSuccessful(),is(false));
  assertThat(result.getMessagesForDisplay(),is("error1"));
}
